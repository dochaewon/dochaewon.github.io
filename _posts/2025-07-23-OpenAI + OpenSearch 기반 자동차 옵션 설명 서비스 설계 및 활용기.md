---
title: "OpenAI + OpenSearch 기반 자동차 옵션 설명 서비스 설계 및 활용기"
date: 2025-07-23
tags: [OpenAI, OpenSearch, AI검색, 대용량데이터, 자동차옵션]
---

## 🧩 배경: AI 설명 생성, 그런데 매번 다시 만들기엔...

최근 차량 정보를 자동으로 설명해주는 AI 서비스를 개발했다.  
OpenAI의 GPT 모델을 활용해 사용자 요청에 따라 **자동차 옵션 설명을 자연어로 생성**하는 방식이다.

하지만 곧 이런 문제가 생겼다:

- 동일한 차량 옵션에 대한 요청이 반복됨
- OpenAI 호출 비용 증가
- 응답 속도 저하
- 캐싱이나 저장 방식 필요

결국, **기존 설명 결과를 저장하고 재사용하는 구조**가 필요했고, 그 역할을 맡게 된 것이 바로 **OpenSearch**였다.

---

## 🛠️ 설계 개요: AI + 검색엔진의 조합

### 📌 목표

- 사용자가 요청한 차량 트림/옵션에 대한 설명을 AI로 생성
- 한 번 생성된 설명은 저장하고, 이후에는 OpenSearch에서 검색
- 응답 속도 개선 + OpenAI 비용 절감 + 검색 확장 가능성 확보

---

## 🔧 데이터 흐름 설계

```
[사용자 요청] → [doc_id 생성: trimId_optionId] → OpenSearch에서 설명 검색 
→ 없으면 OpenAI 호출 후 저장  
→ 있으면 OpenSearch에서 바로 반환
```

### 📄 doc_id 예시

```json
{
  "doc_id": "123_456",      // trimId_optionId
  "trim_id": 123,
  "option_id": 456,
  "description": "[KGA] 차량보호필름Ⅰ 옵션은 기아 더 뉴 스포티지 HEV 2025년형의 프론트 범퍼 측면(사이드)에 장착되는 투명 보호필름입니다. 이 필름은 주행 중 돌, 자갈, 흙, 미세한 긁힘 등 외부 충격으로부터 범퍼 측면 도장면을 보호해줍니다. 덕분에 차량 외관이 오랫동안 깨끗하게 유지되고, 도장 손상으로 인한 수리비 부담도 줄일 수 있습니다. 외관 관리에 신경 쓰는 운전자에게 유용한 보호 옵션입니다."
}
```

---

## 💡 왜 OpenSearch를 선택했나?

| 고려 항목 | 내용 |
|-----------|------|
| 검색 속도 | 단일 doc_id 기반이라 매우 빠름 |
| 유연한 검색 확장 | 나중에 description에서 키워드 검색도 가능 |
| 시각화/분석 | OpenSearch Dashboards로 트렌드 분석 가능 |
| 비용 최적화 | 중복 요청 차단, OpenAI 호출 수 줄임 |
| 오픈소스 | Elastic에서 분기된 Apache 2.0 기반 프로젝트 |

---

## 🚀 실제 동작 예시

1. 사용자가 `"쏘렌토 인스퍼레이션의 HUD 설명해줘"` 요청
2. 시스템은 `doc_id = 321_789` 생성
3. OpenSearch에서 해당 doc_id 검색
4. 없다면 → OpenAI 호출 → 결과 저장 후 응답
5. 있다면 → OpenSearch 결과 그대로 응답

---

## 📊 도입 후 효과

배포 후 업데이트 예정

---

## 🧱 향후 개선 방향

- 트림/옵션 외에 차량 기능, 비교 항목 등 인덱스 확장
- description 버전 관리 기능 추가 (모델 개선 추적)
- OpenSearch Dashboards로 인기 옵션 시각화

---

## ✍️ 마무리

이번 프로젝트는 단순한 “AI 설명 생성기”에서 출발했지만,  
**검색엔진과 조합했을 때 얼마나 실용성이 높아지는지**를 몸소 체감한 사례다.  
OpenAI는 생각을 만들고, OpenSearch는 그 생각을 기억하게 한다.  
이 조합은 앞으로도 다양한 서비스에 응용될 수 있을 예정이다.

---
