---
layout: post
title: "OpenSearchì—ì„œ Painlessë€? ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ ê°„ë‹¨ ì •ë¦¬"
date: 2025-07-28
categories: [opensearch, scripting]
tags: [painless, opensearch, elasticsearch, ìŠ¤í¬ë¦½íŠ¸, ê²€ìƒ‰ì—”ì§„, ì‹¤ë¬´íŒ]
---

OpenSearchì—ì„œ ì¿¼ë¦¬ë¥¼ ì‘ì„±í•˜ë‹¤ ë³´ë©´ ë‹¤ìŒê³¼ ê°™ì€ ì½”ë“œë¥¼ ìì£¼ ë³´ê²Œ ëœë‹¤:

```json
"script": {
  "lang": "painless",
  "source": "doc['price'].value > 10000"
}
```

ì—¬ê¸°ì„œ ë‚˜ì˜¤ëŠ” `"lang": "painless"`ëŠ” ëŒ€ì²´ ë­˜ê¹Œ?

ì²˜ìŒ ë³´ë©´ ìƒì†Œí•  ìˆ˜ ìˆì§€ë§Œ, OpenSearch(ë˜ëŠ” Elasticsearch)ì˜ **ê¸°ë³¸ ë‚´ì¥ ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´**ì´ë‹¤.

---

## ğŸ§  Painlessë€?

- OpenSearchì™€ Elasticsearchì—ì„œ ì‚¬ìš©í•˜ëŠ” **ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´**
- **ë¹ ë¥´ê³  ì•ˆì „í•˜ê²Œ ì‹¤í–‰ë˜ë„ë¡ ì„¤ê³„**ëœ Java ê¸°ë°˜ DSL
- í•„ë“œ ê³„ì‚°, ì¡°ê±´ í•„í„°ë§, ìŠ¤í¬ë¦½íŠ¸ ì •ë ¬ ë“±ì— ì‚¬ìš©ë¨
- ì´ë¦„ì²˜ëŸ¼ â€œê³ í†µ ì—†ì´(painless)â€ ì“°ë¼ëŠ” ì˜ë¯¸ë¡œ ë§Œë“¤ì–´ì§

> Elasticsearch 5.x ë²„ì „ë¶€í„° ê¸°ë³¸ ì–¸ì–´ë¡œ ì±„íƒë˜ì–´ OpenSearchì—ë„ ê·¸ëŒ€ë¡œ ì´ì–´ì§

---

## ğŸ” ì–¸ì œ ì“°ì´ë‚˜?

| ìš©ë„ | ì˜ˆì‹œ |
|------|------|
| ì¡°ê±´ë¶€ í•„í„° | price > 10000 ì¸ ë¬¸ì„œë§Œ í•„í„°ë§ |
| ì»¤ìŠ¤í…€ ìŠ¤ì½”ì–´ ê³„ì‚° | ì¡°íšŒìˆ˜ì™€ ì¢‹ì•„ìš” ìˆ˜ë¥¼ ê°€ì¤‘ì¹˜ë¡œ ê³„ì‚° |
| ì§‘ê³„ í›„ ê³„ì‚° | í‰ê· ê°’ ê¸°ì¤€ ë¹„êµ, ë¹„ìœ¨ ê³„ì‚° ë“± |
| ìŠ¤í¬ë¦½íŠ¸ ê¸°ë°˜ ì •ë ¬ | íŠ¹ì • ì¡°ê±´ì„ ë°˜ì˜í•œ ì •ë ¬ ë¡œì§ êµ¬í˜„ |

---

## ğŸ§ª ì˜ˆì‹œ ì¿¼ë¦¬ë“¤

### 1. ì¡°ê±´ë¶€ í•„í„°
```json
{
  "query": {
    "bool": {
      "filter": {
        "script": {
          "script": {
            "source": "doc['price'].value > 10000",
            "lang": "painless"
          }
        }
      }
    }
  }
}
```

### 2. ë¬¸ì„œ ì ìˆ˜ ì»¤ìŠ¤í„°ë§ˆì´ì§•
```json
{
  "query": {
    "function_score": {
      "script_score": {
        "script": {
          "source": "doc['view_count'].value * 0.7 + doc['like_count'].value * 1.5",
          "lang": "painless"
        }
      }
    }
  }
}
```

---

## âš ï¸ ì£¼ì˜ì‚¬í•­

- `doc['field']` ì ‘ê·¼ë§Œ ê°€ëŠ¥ (`_source` ì‚¬ìš© âŒ)
- íƒ€ì… ì²´í¬ ì•ˆ í•˜ë©´ null/ì—ëŸ¬ ë°œìƒ ê°€ëŠ¥
- ë³µì¡í•œ ê³„ì‚° ë¡œì§ì€ ì„±ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŒ
- ê°€ëŠ¥í•œ í•œ **ì§‘ê³„ë‚˜ ë§¤í•‘ ë ˆë²¨ì—ì„œ ì²˜ë¦¬ í›„ ì‚¬ìš©í•˜ëŠ” ê²Œ ë” ì•ˆì „**

---

## âœ… ì •ë¦¬

- `painless`ëŠ” OpenSearchì˜ ë‚´ì¥ ìŠ¤í¬ë¦½íŠ¸ ì–¸ì–´ë¡œ,  
  ì¡°ê±´ í•„í„°, ê³„ì‚°, ì •ë ¬, ì ìˆ˜ ì¡°ì • ë“± ë‹¤ì–‘í•˜ê²Œ í™œìš©ëœë‹¤.
- ê¸°ë³¸ì ìœ¼ë¡œ ì•ˆì „í•˜ê³  ë¹ ë¥´ì§€ë§Œ, **ë¬´ë¶„ë³„í•˜ê²Œ ì‚¬ìš© ì‹œ ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥**í•˜ë¯€ë¡œ  
  ê°€ë³ê³  ëª…í™•í•œ ê³„ì‚°ì—ë§Œ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

> ì‹¤ë¬´ì—ì„œëŠ” íŠ¹íˆ `script_score`, `bucket_script`, `scripted_metric` ë“±ê³¼ í•¨ê»˜ ìì£¼ ì“°ì¸ë‹¤.

---

## ğŸ·ï¸ íƒœê·¸
#OpenSearch #Painless #Elasticsearch #ìŠ¤í¬ë¦½íŠ¸ #ê²€ìƒ‰ì—”ì§„ #ì¿¼ë¦¬ #DevTools #ì‹¤ë¬´íŒ #FunctionScore #ScriptScore
